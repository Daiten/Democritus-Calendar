<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Democritus Calendar</title>
    <style>
        :root { 
            --bg: #101010; 
            --accent: #00adb5; 
            --text: #eeeeee; 
            --dim: #888888; 
            --line: #393e46; 
            --Thallium: #A6544D 
        }
        body { font-family: 'Times New Roman', serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { text-align: center; width: 90%; max-width: 400px; padding: 20px; }
        #img-box { 
            width: 250px; 
            height: 250px; 
            margin: 40px auto; 
            background: #101010; 
            border: 0px solid var(--line); 
            border-radius: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            overflow: hidden; 
        }
        #element-img { 
            width: 100%; 
            height: 100%; 
            object-fit: contain;
            display: none; 
        }
        #header { color: var(--accent); font-weight: bold; font-size: 1.8rem; text-transform: uppercase; margin-bottom: 10px; }
        
        /* The 'filter' below makes whatever color JS applies 80% lighter */
        #day { 
            font-size: 2.4rem; 
            font-weight: bold; 
            margin: 0; 
            filter: brightness(0.75); 
        }
        
        #name { font-size: 3.5rem; font-weight: 800; margin: 5px 0; text-transform: uppercase;filter: brightness(1) }
        .hr { height: 2px; width: 50px; background: var(--line); margin: 20px auto; }
        #year { color: var(--dim); font-style: normal; font-size: 1.5rem; }
        #debug { color: #ff5555; font-size: 0.7rem; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="card">
        <div id="header">Loading...</div>
        <div id="img-box">
            <img id="element-img" src="">
            <span id="placeholder" style="color:#555">Loading Element...</span>
        </div>
        <p id="day"></p>
        <h1 id="name"></h1>
        <div class="hr"></div>
        <div id="year"></div>
        <div id="debug"></div>
    </div>
    
    <script>
        const elements = [
            "Hydrogen", "Helium", "Lithium", "Beryllium", "Boron", "Carbon", "Nitrogen", "Oxygen", "Fluorine", "Neon",
            "Sodium", "Magnesium", "Aluminium", "Silicon", "Phosphorus", "Sulfur", "Chlorine", "Argon", "Potassium", "Calcium",
            "Scandium", "Titanium", "Vanadium", "Chromium", "Manganese", "Iron", "Cobalt", "Nickel", "Copper", "Zinc",
            "Gallium", "Germanium", "Arsenic", "Selenium", "Bromine", "Krypton", "Rubidium", "Strontium", "Yttrium", "Zirconium",
            "Niobium", "Molybdenum", "Technetium", "Ruthenium", "Rhodium", "Palladium", "Silver", "Cadmium", "Indium", "Tin",
            "Antimony", "Tellurium", "Iodine", "Xenon", "Cesium", "Barium", "Lanthanum", "Cerium", "Praseodymium", "Neodymium",
            "Promethium", "Samarium", "Europium", "Gadolinium", "Terbium", "Dysprosium", "Holmium", "Erbium", "Thulium", "Ytterbium",
            "Lutetium", "Hafnium", "Tantalum", "Tungsten", "Rhenium", "Osmium", "Iridium", "Platinum", "Gold", "Mercury",
            "Thallium", "Lead", "Bismuth", "Polonium", "Astatine", "Radon", "Francium", "Radium", "Actinium", "Thorium",
            "Protactinium", "Uranium"
        ];

        const GITHUB_USERNAME = 'Daiten';
        const GITHUB_REPO = 'Democritus-Calendar';
        const GITHUB_BRANCH = 'main';

        function getImageSources(elementName) {
            const lower = elementName.toLowerCase();
            return [
                `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${GITHUB_REPO}/${GITHUB_BRANCH}/elements/${lower}.png`,
                `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${GITHUB_REPO}/${GITHUB_BRANCH}/elements/${lower}.jpg`,
                `https://images-of-elements.com/s/${lower}.png`,
                `https://images-of-elements.com/${lower}.png`,
                `https://images-of-elements.com/s/${lower}.jpg`
            ];
        }

        function tryLoadImage(sources, index = 0) {
            const img = document.getElementById('element-img');
            const placeholder = document.getElementById('placeholder');
            
            if (index >= sources.length) {
                placeholder.style.display = 'block';
                img.style.display = 'none';
                return;
            }

            img.onload = () => {
                img.style.display = "block";
                placeholder.style.display = "none";
            };
            
            img.onerror = () => tryLoadImage(sources, index + 1);
            img.src = sources[index];
        }

        function run() {
            try {
                const now = new Date();
                const msInDay = 86400000;
                const daysSince0001 = Math.floor((now.getTime() + 62135596800000) / msInDay);
                const totalDays = daysSince0001 + (460 * 365.2425);

                const dayIdx = Math.floor(totalDays % 92);
                const elementName = elements[dayIdx];
                const yearNum = Math.floor(totalDays / 92) + 1;
                const yearElement = elements[Math.floor(yearNum % 92)];

                // Update UI Text
                document.getElementById('header').innerText = now.toDateString();
                
                const dayEl = document.getElementById('day');
                dayEl.innerText = "Day " + (dayIdx + 1);
                
                const nameEl = document.getElementById('name');
                nameEl.innerText = elementName;
                
                document.getElementById('year').innerText = "Year " + yearNum + " â€¢ Era of " + yearElement;

                // Color Magic: Applying the element color variable to both
                // The 'day' ID will be lighter because of the filter in CSS
                const elementVar = `var(--${elementName}, var(--accent))`;
                nameEl.style.color = elementVar;
                dayEl.style.color = elementVar;

                // Image logic
                const sources = getImageSources(elementName);
                tryLoadImage(sources);

            } catch (e) {
                document.getElementById('debug').innerText = "Error: " + e.message;
            }
        }

        run();
    </script>
</body>
</html>
