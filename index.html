<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Democritus Calendar</title>
    <style>
        :root { --bg: #1e1e1e; --accent: #00adb5; --text: #eeeeee; --dim: #888888; --line: #393e46; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { text-align: center; width: 90%; max-width: 400px; padding: 20px; }
        #img-box { 
            width: 200px; 
            height: 200px; 
            margin: 20px auto; 
            background: #2a2a2a; 
            border: 2px solid var(--line); 
            border-radius: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            overflow: hidden; 
        }
        #element-img { 
            width: 100%; 
            height: 100%; 
            object-fit: contain;
            display: none; 
        }
        #header { color: var(--dim); font-size: 0.8rem; text-transform: uppercase; margin-bottom: 10px; }
        #day { color: var(--accent); font-size: 1.4rem; font-weight: bold; margin: 0; }
        #name { font-size: 3.5rem; font-weight: 800; margin: 5px 0; text-transform: uppercase; }
        .hr { height: 2px; width: 50px; background: var(--line); margin: 20px auto; }
        #year { color: var(--dim); font-style: italic; font-size: 1.1rem; }
        #debug { color: #ff5555; font-size: 0.7rem; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="card">
        <div id="header">Loading...</div>
        <div id="img-box">
            <img id="element-img" src="">
            <span id="placeholder" style="color:#555">Loading Element...</span>
        </div>
        <p id="day"></p>
        <h1 id="name"></h1>
        <div class="hr"></div>
        <div id="year"></div>
        <div id="debug"></div>
    </div>

    <script>
        const elements = [
            "Hydrogen", "Helium", "Lithium", "Beryllium", "Boron", "Carbon", "Nitrogen", "Oxygen", "Fluorine", "Neon",
            "Sodium", "Magnesium", "Aluminium", "Silicon", "Phosphorus", "Sulfur", "Chlorine", "Argon", "Potassium", "Calcium",
            "Scandium", "Titanium", "Vanadium", "Chromium", "Manganese", "Iron", "Cobalt", "Nickel", "Copper", "Zinc",
            "Gallium", "Germanium", "Arsenic", "Selenium", "Bromine", "Krypton", "Rubidium", "Strontium", "Yttrium", "Zirconium",
            "Niobium", "Molybdenum", "Technetium", "Ruthenium", "Rhodium", "Palladium", "Silver", "Cadmium", "Indium", "Tin",
            "Antimony", "Tellurium", "Iodine", "Xenon", "Cesium", "Barium", "Lanthanum", "Cerium", "Praseodymium", "Neodymium",
            "Promethium", "Samarium", "Europium", "Gadolinium", "Terbium", "Dysprosium", "Holmium", "Erbium", "Thulium", "Ytterbium",
            "Lutetium", "Hafnium", "Tantalum", "Tungsten", "Rhenium", "Osmium", "Iridium", "Platinum", "Gold", "Mercury",
            "Thallium", "Lead", "Bismuth", "Polonium", "Astatine", "Radon", "Francium", "Radium", "Actinium", "Thorium",
            "Protactinium", "Uranium"
        ];

        // UPDATE THIS: Replace 'YOUR-USERNAME' and 'YOUR-REPO' with your actual GitHub username and repository name
        const GITHUB_USERNAME = 'Daiten';
        const GITHUB_REPO = 'Democritus-Calendar';
        const GITHUB_BRANCH = 'main'; // or 'master' if that's your default branch

        function getImageSources(elementName) {
            const lower = elementName.toLowerCase();
            return [
                // Try GitHub repo first (PNG)
                `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${GITHUB_REPO}/${GITHUB_BRANCH}/elements/${lower}.png`,
                // Try GitHub repo (JPG)
                `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${GITHUB_REPO}/${GITHUB_BRANCH}/elements/${lower}.jpg`,
                // Fallback to images-of-elements.com (PNG)
                `https://images-of-elements.com/s/${lower}.png`,
                // Fallback to images-of-elements.com (another PNG location)
                `https://images-of-elements.com/${lower}.png`,
                // Final fallback (JPG)
                `https://images-of-elements.com/s/${lower}.jpg`
            ];
        }

        function tryLoadImage(sources, index = 0) {
            if (index >= sources.length) {
                document.getElementById('placeholder').style.display = 'block';
                return;
            }

            const img = document.getElementById('element-img');
            
            img.onload = () => {
                img.style.display = "block";
                document.getElementById('placeholder').style.display = "none";
            };
            
            img.onerror = () => {
                tryLoadImage(sources, index + 1);
            };
            
            img.src = sources[index];
        }

        function run() {
            try {
                const now = new Date();
                
                // MATH REPAIR: 
                // We use Unix Time (ms since 1970) + the ms from Year 1 to 1970.
                const msInDay = 86400000;
                const daysSince0001 = Math.floor((now.getTime() + 62135596800000) / msInDay);
                const totalDays = daysSince0001 + (460 * 365.2425);

                const dayIdx = Math.floor(totalDays % 92);
                const yearNum = Math.floor(totalDays / 92) + 1;
                const yearElement = elements[Math.floor(yearNum % 92)];

                // Update UI
                document.getElementById('header').innerText = now.toDateString();
                document.getElementById('day').innerText = "Day " + (dayIdx + 1);
                document.getElementById('name').innerText = elements[dayIdx];
                document.getElementById('year').innerText = "Year " + yearNum + " â€¢ Era of " + yearElement;

                // Try GitHub first, then fallback to images-of-elements.com
                const sources = getImageSources(elements[dayIdx]);
                tryLoadImage(sources);

            } catch (e) {
                document.getElementById('debug').innerText = "Error: " + e.message;
            }
        }

        run();
    </script>
</body>
</html>
